&НаСервере
Функция ПолучитьЦенуЛекарстваНаСервере(Лекарство)
    // Создаем запрос для получения цены
    Запрос = Новый Запрос;
    Запрос.Текст = 
    "ВЫБРАТЬ
    |    ЦеныНаЛекарства.Цена
    |ИЗ
    |    Справочник.ЦеныНаЛекарства КАК ЦеныНаЛекарства
    |ГДЕ
    |    ЦеныНаЛекарства.Лекарство = &Лекарство";
    
    Запрос.УстановитьПараметр("Лекарство", Лекарство);
    
    РезультатЗапроса = Запрос.Выполнить();
    Выборка = РезультатЗапроса.Выбрать();
    
    // Если есть результат, то возвращаем цену
    Если Выборка.Следующий() Тогда
        Возврат Выборка.Цена;
    Иначе
        Возврат 0;
    КонецЕсли;
КонецФункции                 

&НаСервере
Процедура ОбновитьОстаткиНаСервере(ТабличнаяЧасть)
    // Проходим по всем строкам табличной части
    Для Каждого СтрокаТабличнойЧасти Из ТабличнаяЧасть Цикл
        // Получаем данные из строки
        Лекарство = СтрокаТабличнойЧасти.Лекарство;
        Количество = СтрокаТабличнойЧасти.Количество;
        
        // Обновляем остатки в регистре накопления
        РегистрОстатков = РегистрыНакопления.ОстаткиНаСкладе.СоздатьМенеджерЗаписи();
        РегистрОстатков.Измерения.Лекарство = Лекарство;
        РегистрОстатков.Ресурсы.Количество = Количество;
        РегистрОстатков.Записать();
    КонецЦикла;
КонецПроцедуры